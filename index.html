<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ë¬¸í™”ë½ | ê³µì—°Â·êµìœ¡Â·ë¬¸í™”ì˜ˆìˆ  í”Œë«í¼</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --k100:#111; --k70:#444; --k40:#888;
      --line:#E9E9E9; --bg:#fff; --card:#fff;
      --shadow: 0 10px 30px rgba(0,0,0,.08);
      --radius:18px;
      --footer-bg:#F4E9D8;   /* M15 Y10 ê·¼ì‚¬ */
      --footer-text:#111;
    }
    *{box-sizing:border-box}
    html,body{margin:0; padding:0; background:var(--bg); color:var(--k100); font-family:"Noto Sans KR", system-ui, -apple-system, Segoe UI, Roboto, sans-serif;}
    a{color:inherit; text-decoration:none}
    img{max-width:100%; display:block}

    .container{width:min(1120px,92vw); margin:0 auto;}
    .section{padding:48px 0;}
    .section-title{font-size:26px; font-weight:700; letter-spacing:-.5px; margin:0 0 18px;}
    .section-sub{color:var(--k70); margin:0 0 24px; line-height:1.6}

    header{
      position:sticky; top:0; z-index:50;
      background:rgba(255,255,255,.92);
      backdrop-filter:saturate(180%) blur(10px);
      border-bottom:1px solid var(--line);
    }
    .topbar{
      display:grid; grid-template-columns:160px 1fr 160px;
      align-items:center; padding:14px 0 6px; gap:10px;
    }
    .brand-left{display:flex; align-items:center; gap:10px;}
    .logo{width:44px; height:44px; border-radius:12px; object-fit:cover; border:1px solid var(--line); background:#fff;}
    .brand-center{text-align:center; font-weight:700; letter-spacing:-.6px; font-size:18px; line-height:1.2;}
    .brand-center small{display:block; font-weight:400; color:var(--k40); margin-top:4px; font-size:12px;}
    .topbar-right{display:flex; justify-content:flex-end; gap:10px; align-items:center;}
    .tiny-pill{border:1px solid var(--line); background:#fff; padding:8px 10px; border-radius:999px; font-size:12px; color:var(--k70);}

    nav{display:flex; justify-content:center; gap:18px; padding:10px 0 14px; flex-wrap:wrap;}
    .nav-link{
      font-weight:700; font-size:14px; color:var(--k100);
      padding:6px 2px; border-bottom:2px solid transparent;
    }
    .nav-link:hover{border-bottom-color:var(--k100);}
    .nav-link.active{border-bottom-color:var(--k100);}

    .hero{padding:18px 0 0;}
    .slider{
      position:relative; border-radius:24px; overflow:hidden;
      border:1px solid var(--line); background:#f7f7f7; box-shadow:var(--shadow);
    }
    .slides{display:flex; transition:transform .6s ease; will-change:transform;}
    .slide{min-width:100%; height:420px; position:relative; background:#f2f2f2;}
    .slide img{width:100%; height:100%; object-fit:cover;}
    .slide-overlay{
      position:absolute; left:0; right:0; bottom:0; padding:18px 20px;
      background:linear-gradient(to top, rgba(0,0,0,.55), rgba(0,0,0,0));
      color:#fff;
    }
    .slide-overlay h1{margin:0; font-size:26px; letter-spacing:-.6px; font-weight:700;}
    .slide-overlay p{margin:6px 0 0; opacity:.9; line-height:1.4; font-size:14px; font-weight:400;}
    .dots{position:absolute; left:0; right:0; bottom:12px; display:flex; justify-content:center; gap:8px;}
    .dot{width:8px; height:8px; border-radius:999px; background:rgba(255,255,255,.55); border:1px solid rgba(0,0,0,.15); cursor:pointer;}
    .dot.active{background:#fff;}

    .grid{display:grid; grid-template-columns:repeat(3,1fr); gap:18px;}
    @media (max-width:980px){
      .grid{grid-template-columns:repeat(2,1fr);}
      .slide{height:340px;}
      .topbar{grid-template-columns:120px 1fr 120px;}
    }
    @media (max-width:620px){
      .grid{grid-template-columns:1fr;}
      .slide{height:280px;}
      .brand-center{font-size:16px;}
    }

    .card{
      border:1px solid var(--line); border-radius:var(--radius);
      overflow:hidden; background:var(--card);
      box-shadow:0 8px 20px rgba(0,0,0,.06);
      cursor:pointer;
      transition:transform .15s ease, box-shadow .15s ease;
    }
    .card:hover{transform:translateY(-2px); box-shadow:0 14px 30px rgba(0,0,0,.10);}
    .poster{aspect-ratio:3/4; background:#f4f4f4; border-bottom:1px solid var(--line);}
    .poster img{width:100%; height:100%; object-fit:cover;}
    .card-body{padding:14px 14px 16px;}
    .title-bold{font-weight:700; font-size:15px; line-height:1.35; margin:0 0 6px;}
    .date-regular{font-weight:400; color:var(--k70); font-size:13px; margin:0;}

    .sns-row{display:flex; gap:14px; align-items:center; margin-top:18px; flex-wrap:wrap;}
    .sns-icon{
      display:inline-flex; gap:8px; align-items:center;
      padding:10px 12px; border:1px solid var(--line);
      border-radius:999px; background:#fff; font-size:13px; color:var(--k100);
    }
    .sns-icon:hover{box-shadow:0 8px 18px rgba(0,0,0,.08);}
    .svg{width:18px; height:18px; display:block;}

    .tabs{display:flex; gap:10px; flex-wrap:wrap; margin:0 0 16px;}
    .tab{border:1px solid var(--line); background:#fff; padding:10px 12px; border-radius:999px; font-weight:700; font-size:13px; cursor:pointer;}
    .tab.active{border-color:var(--k100);}
    .tab-content{
      border:1px solid var(--line); border-radius:18px;
      padding:18px; background:#fff; box-shadow:0 10px 24px rgba(0,0,0,.06);
    }
    .tab-content p{margin:0 0 12px; line-height:1.8; color:var(--k70);}
    .two-img{display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:10px;}
    @media (max-width:740px){.two-img{grid-template-columns:1fr;}}
    .two-img img{border-radius:14px; border:1px solid var(--line); height:280px; object-fit:cover; background:#f6f6f6;}
    .gallery{display:grid; grid-template-columns:repeat(3,1fr); gap:12px; margin-top:10px;}
    @media (max-width:980px){.gallery{grid-template-columns:repeat(2,1fr);}}
    @media (max-width:620px){.gallery{grid-template-columns:1fr;}}
    .gallery img{border-radius:14px; border:1px solid var(--line); height:220px; object-fit:cover; background:#f6f6f6;}

    .cal-wrap{border:1px solid var(--line); border-radius:18px; background:#fff; box-shadow:0 10px 24px rgba(0,0,0,.06); overflow:hidden;}
    .cal-head{display:flex; align-items:center; justify-content:space-between; padding:14px; border-bottom:1px solid var(--line);}
    .cal-head .month{font-weight:700; letter-spacing:-.4px;}
    .cal-btn{border:1px solid var(--line); background:#fff; padding:8px 10px; border-radius:10px; cursor:pointer; font-weight:700; font-size:13px;}
    .cal-grid{display:grid; grid-template-columns:repeat(7,1fr);}
    .dow{padding:10px 0; text-align:center; font-size:12px; color:var(--k70); border-bottom:1px solid var(--line); background:#fafafa; font-weight:700;}
    .cell{min-height:110px; border-right:1px solid var(--line); border-bottom:1px solid var(--line); padding:10px; position:relative;}
    .cell:nth-child(7n){border-right:none;}
    .daynum{font-size:12px; color:var(--k70); font-weight:700;}
    .badges{display:flex; gap:6px; flex-wrap:wrap; margin-top:8px;}
    .badge{display:inline-flex; align-items:center; gap:6px; padding:6px 8px; border-radius:999px; border:1px solid var(--line); background:#fff; font-size:12px; max-width:100%;}
    .badge .hall{width:18px; height:18px; border-radius:6px; display:inline-flex; align-items:center; justify-content:center; font-weight:700; font-size:12px; color:#fff; flex:0 0 auto;}
    .hall1{background:#E11D48;} .hall2{background:#0284C7;}
    .badge .txt{overflow:hidden; text-overflow:ellipsis; white-space:nowrap; color:var(--k100); font-weight:700;}

    .modal-backdrop{position:fixed; inset:0; background:rgba(0,0,0,.55); display:none; align-items:center; justify-content:center; padding:18px; z-index:100;}
    .modal{width:min(980px,96vw); max-height:90vh; overflow:auto; background:#fff; border-radius:18px; box-shadow:0 30px 70px rgba(0,0,0,.35); border:1px solid rgba(255,255,255,.25);}
    .modal-head{display:flex; align-items:flex-start; justify-content:space-between; gap:10px; padding:16px 16px 10px; border-bottom:1px solid var(--line); position:sticky; top:0; background:#fff; z-index:1;}
    .modal-title{margin:0; font-size:18px; font-weight:700; letter-spacing:-.4px;}
    .modal-sub{margin:6px 0 0; font-size:13px; color:var(--k70);}
    .close{border:1px solid var(--line); background:#fff; border-radius:12px; width:40px; height:40px; font-size:18px; cursor:pointer;}
    .modal-body{padding:16px;}
    .detail-img{width:100%; border-radius:16px; border:1px solid var(--line); background:#f6f6f6;}

    footer{background:var(--footer-bg); color:var(--footer-text); padding:26px 0; border-top:1px solid rgba(0,0,0,.08);}
    .footer-grid{display:grid; grid-template-columns:1fr; gap:10px; font-size:14px; line-height:1.8;}
    .footer-bold{font-weight:700;}
    .footer-regular{font-weight:400;}
  </style>
</head>

<body>
  <header>
    <div class="container">
      <div class="topbar">
        <div class="brand-left">
          <img class="logo" id="logoEl" src="/images/logo.png" alt="ë¬¸í™”ë½ ë¡œê³ " onerror="this.style.display='none'">
        </div>

        <div class="brand-center" id="headerTitle">
          ì¸ì¦ì‚¬íšŒì ê¸°ì—…(ì£¼)ë¬¸í™”ë½
          <small id="headerSubtitle">ê³µì—° Â· êµìœ¡ Â· ë¬¸í™”ì˜ˆìˆ  í”Œë«í¼</small>
        </div>

        <div class="topbar-right">
          <span class="tiny-pill" id="todayText">Today</span>
        </div>
      </div>

      <nav id="nav">
        <a class="nav-link" href="#now" data-route="now">í˜„ì¬ê³µì—°</a>
        <a class="nav-link" href="#past" data-route="past">ì´ì „ê³µì—°</a>
        <a class="nav-link" href="#about" data-route="about">ê³µì—°ë‹¨ì²´ì†Œê°œ</a>
        <a class="nav-link" href="#rent" data-route="rent">ê³µì—°ëŒ€ê´€ì¼ì •</a>
        <a class="nav-link" href="/admin/" target="_blank" rel="noopener">ê´€ë¦¬ì</a>
      </nav>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container">
        <div class="slider">
          <div class="slides" id="slides"></div>
          <div class="dots" id="dots"></div>
        </div>
      </div>
    </section>

    <section class="section" id="nowSection">
      <div class="container">
        <h2 class="section-title">í˜„ì¬ê³µì—°</h2>
        <p class="section-sub">í¬ìŠ¤í„°ë¥¼ í´ë¦­í•˜ë©´ ìƒì„¸í˜ì´ì§€ê°€ ì—´ë¦½ë‹ˆë‹¤.</p>
        <div class="grid" id="nowGrid"></div>
      </div>
    </section>

    <section class="section" id="pastSection">
      <div class="container">
        <h2 class="section-title">ì´ì „ê³µì—°</h2>
        <p class="section-sub">í¬ìŠ¤í„°ë¥¼ í´ë¦­í•˜ë©´ ìƒì„¸í˜ì´ì§€ê°€ ì—´ë¦½ë‹ˆë‹¤.</p>
        <div class="grid" id="pastGrid"></div>

        <div class="sns-row" aria-label="SNS ë§í¬">
          <a class="sns-icon" href="https://www.instagram.com/gaonarthall" target="_blank" rel="noopener">
            <svg class="svg" viewBox="0 0 24 24" aria-hidden="true">
              <path fill="#C13584" d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5z"/>
              <path fill="#fff" d="M12 7.3A4.7 4.7 0 1 0 16.7 12 4.7 4.7 0 0 0 12 7.3zm0 7.7A3 3 0 1 1 15 12a3 3 0 0 1-3 3z"/>
              <circle cx="17.7" cy="6.4" r="1.1" fill="#fff"/>
            </svg>
            ğŸŸ£ Instagram
          </a>

          <a class="sns-icon" href="https://blog.naver.com/gaonarthall12" target="_blank" rel="noopener">
            <svg class="svg" viewBox="0 0 24 24" aria-hidden="true">
              <rect x="3" y="3" width="18" height="18" rx="4" fill="#03C75A"/>
              <path fill="#fff" d="M8 16V8h2.3l3.2 4.6V8H16v8h-2.3l-3.2-4.6V16H8z"/>
            </svg>
            ğŸŸ¢ Blog
          </a>
        </div>
      </div>
    </section>

    <section class="section" id="aboutSection">
      <div class="container">
        <h2 class="section-title">ê³µì—°ë‹¨ì²´ì†Œê°œ</h2>

        <div class="tabs" role="tablist">
          <button class="tab active" data-tab="intro" type="button">ë¬¸í™”ë½ ì†Œê°œ</button>
          <button class="tab" data-tab="history" type="button">ì‹¤ì </button>
          <button class="tab" data-tab="works" type="button">ë¬¸í™”ë½ ì œì‘ ê³µì—°</button>
        </div>

        <div class="tab-content" id="tabContent"></div>
      </div>
    </section>

    <section class="section" id="rentSection">
      <div class="container">
        <h2 class="section-title">ê³µì—°ëŒ€ê´€ì¼ì •</h2>
        <p class="section-sub">ë‹¬ë ¥ì˜ â‘ /â‘¡ëŠ” ê° ê´€(1ê´€/2ê´€)ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.</p>

        <div class="cal-wrap">
          <div class="cal-head">
            <button class="cal-btn" id="prevMonth" type="button">â—€</button>
            <div class="month" id="monthLabel">YYYY.MM</div>
            <button class="cal-btn" id="nextMonth" type="button">â–¶</button>
          </div>

          <div class="cal-grid" id="dowRow"></div>
          <div class="cal-grid" id="calGrid"></div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <div class="footer-grid">
        <div><span class="footer-bold">ìƒí˜¸ëª…</span><span class="footer-regular"> ì£¼ì‹íšŒì‚¬ë¬¸í™”ë½</span></div>
        <div><span class="footer-bold">ì‚¬ì—…ì¥ ì£¼ì†Œ</span><span class="footer-regular"> ë¶€ì‚°ê´‘ì—­ì‹œ ë™êµ¬ ìì„±ë¡œ133ë²ˆê¸¸ ì§€í•˜1ì¸µ</span></div>
        <div>
          <span class="footer-bold">ëŒ€í‘œì „í™”</span><span class="footer-regular"> 1600-1602</span>
          <span class="footer-bold" style="margin-left:14px;">ì´ë©”ì¼</span><span class="footer-regular"> 16001602@hanmail.net</span>
        </div>
        <div><span class="footer-bold">í™ˆí˜ì´ì§€</span><span class="footer-regular"> https://culturelock.co.kr</span></div>
        <div><span class="footer-bold">ì¸ìŠ¤íƒ€</span><span class="footer-regular"> https://www.instagram.com/gaonarthall</span></div>
        <div><span class="footer-bold">ë¸”ë¡œê·¸</span><span class="footer-regular"> https://blog.naver.com/gaonarthall12</span></div>
        <div><span class="footer-bold">ì‚¬ì—…ì ë“±ë¡ë²ˆí˜¸</span><span class="footer-regular"> 605-86-13527</span></div>
      </div>
    </div>
  </footer>

  <div class="modal-backdrop" id="modalBackdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true">
      <div class="modal-head">
        <div>
          <h3 class="modal-title" id="modalTitle">ê³µì—° ì œëª©</h3>
          <div class="modal-sub" id="modalSub">ê³µì—°ì¼ì •</div>
        </div>
        <button class="close" id="closeModal" type="button" aria-label="ë‹«ê¸°">Ã—</button>
      </div>
      <div class="modal-body" id="modalBody"></div>
    </div>
  </div>

  <script>
    // ì˜¤ëŠ˜ í‘œì‹œ
    const today = new Date();
    document.getElementById("todayText").textContent =
      today.toLocaleDateString("ko-KR", {year:"numeric", month:"2-digit", day:"2-digit"});

    // ë¼ìš°íŒ…
    const routeMap = {
      now: document.getElementById("nowSection"),
      past: document.getElementById("pastSection"),
      about: document.getElementById("aboutSection"),
      rent: document.getElementById("rentSection")
    };
    function setActiveNav(route){
      document.querySelectorAll(".nav-link").forEach(a=>{
        if(!a.dataset.route) return;
        a.classList.toggle("active", a.dataset.route === route);
      });
    }
    function go(route){
      const el = routeMap[route] || routeMap.now;
      setActiveNav(route);
      el.scrollIntoView({behavior:"smooth", block:"start"});
    }
    window.addEventListener("hashchange", ()=>{
      const r = (location.hash || "#now").replace("#","");
      go(r);
    });
    setTimeout(()=>go((location.hash||"#now").replace("#","")), 30);

    // ëª¨ë‹¬
    const modalBackdrop = document.getElementById("modalBackdrop");
    const closeModalBtn = document.getElementById("closeModal");
    const modalTitle = document.getElementById("modalTitle");
    const modalSub = document.getElementById("modalSub");
    const modalBody = document.getElementById("modalBody");
    function openDetail(show){
      modalTitle.textContent = show.title || "ìƒì„¸í˜ì´ì§€";
      modalSub.textContent = show.dateText || "";
      modalBody.innerHTML = show.detailImage
        ? `<img class="detail-img" src="${show.detailImage}" alt="${escapeHtml(show.title)} ìƒì„¸">`
        : `<p style="color:#444;line-height:1.7;">ìƒì„¸ ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.</p>`;
      modalBackdrop.style.display="flex";
      modalBackdrop.setAttribute("aria-hidden","false");
      document.body.style.overflow="hidden";
    }
    function closeDetail(){
      modalBackdrop.style.display="none";
      modalBackdrop.setAttribute("aria-hidden","true");
      document.body.style.overflow="";
    }
    closeModalBtn.addEventListener("click", closeDetail);
    modalBackdrop.addEventListener("click", (e)=>{ if(e.target===modalBackdrop) closeDetail(); });

    // ìŠ¬ë¼ì´ë“œ
    const slidesEl = document.getElementById("slides");
    const dotsEl = document.getElementById("dots");
    let HERO = [];
    let slideIndex = 0;
    let slideTimer = null;

    function renderSlider(){
      slidesEl.innerHTML = "";
      dotsEl.innerHTML = "";
      if(!HERO.length){
        HERO = [{img:"/images/hero/slide1.jpg", title:"ë¬¸í™”ë½", desc:""}];
      }
      HERO.forEach((s, idx)=>{
        const div = document.createElement("div");
        div.className = "slide";
        div.innerHTML = `
          <img src="${s.img}" alt="${escapeHtml(s.title)}">
          <div class="slide-overlay">
            <h1>${escapeHtml(s.title)}</h1>
            <p>${escapeHtml(s.desc || "")}</p>
          </div>
        `;
        slidesEl.appendChild(div);

        const dot = document.createElement("div");
        dot.className = "dot" + (idx===0 ? " active":"");
        dot.addEventListener("click", ()=>{ setSlide(idx); restartSlider(); });
        dotsEl.appendChild(dot);
      });
      setSlide(0);
      restartSlider();
    }
    function setSlide(i){
      slideIndex = (i + HERO.length) % HERO.length;
      slidesEl.style.transform = `translateX(-${slideIndex * 100}%)`;
      [...dotsEl.children].forEach((d,idx)=> d.classList.toggle("active", idx===slideIndex));
    }
    function restartSlider(){
      if(slideTimer) clearInterval(slideTimer);
      slideTimer = setInterval(()=> setSlide(slideIndex+1), 3800);
    }

    // ê³µì—° ì¹´ë“œ
    const nowGrid = document.getElementById("nowGrid");
    const pastGrid = document.getElementById("pastGrid");
    function makeShowCard(show){
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <div class="poster"><img src="${show.poster}" alt="${escapeHtml(show.title)} í¬ìŠ¤í„°"></div>
        <div class="card-body">
          <p class="title-bold">${escapeHtml(show.title)}</p>
          <p class="date-regular">${escapeHtml(show.dateText || "")}</p>
        </div>
      `;
      card.addEventListener("click", ()=> openDetail(show));
      return card;
    }
    function renderShows(SHOWS){
      nowGrid.innerHTML = "";
      pastGrid.innerHTML = "";
      (SHOWS.now || []).forEach(s => nowGrid.appendChild(makeShowCard(s)));
      (SHOWS.past || []).forEach(s => pastGrid.appendChild(makeShowCard(s)));
    }

    // ê³µì—°ë‹¨ì²´ì†Œê°œ(íƒ­)
    const tabs = document.querySelectorAll(".tab");
    const tabContent = document.getElementById("tabContent");
    let SITE = null;

    function renderTab(key){
      tabs.forEach(t=> t.classList.toggle("active", t.dataset.tab===key));
      if(!SITE){ tabContent.innerHTML=""; return; }

      if(key==="intro"){
        tabContent.innerHTML = `
          <p><b>(ì£¼)ë¬¸í™”ë½ ì†Œê°œ</b></p>
          <p>${escapeHtml(SITE.aboutIntroText || "")}</p>
          <div class="two-img">
            ${SITE.aboutImg1 ? `<img src="${SITE.aboutImg1}" alt="ì†Œê°œ ì´ë¯¸ì§€ 1">` : ""}
            ${SITE.aboutImg2 ? `<img src="${SITE.aboutImg2}" alt="ì†Œê°œ ì´ë¯¸ì§€ 2">` : ""}
          </div>
        `;
      }
      if(key==="history"){
        tabContent.innerHTML = `
          <p><b>ì‹¤ì </b></p>
          ${SITE.aboutHistoryImg ? `<img class="detail-img" src="${SITE.aboutHistoryImg}" alt="ì£¼ìš”ì‹¤ì ">` : "<p>ì‹¤ì  ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.</p>"}
        `;
      }
      if(key==="works"){
        const imgs = (SITE.aboutWorksImgs || []).map(src=>`<img src="${src}" alt="ì œì‘ê³µì—°">`).join("");
        tabContent.innerHTML = `
          <p><b>ë¬¸í™”ë½ ì œì‘ ê³µì—°</b></p>
          <div class="gallery">${imgs || "<p>ì´ë¯¸ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.</p>"}</div>
        `;
      }
    }
    tabs.forEach(t=> t.addEventListener("click", ()=> renderTab(t.dataset.tab)));

    // ë‹¬ë ¥
    const dowRow = document.getElementById("dowRow");
    const calGrid = document.getElementById("calGrid");
    const monthLabel = document.getElementById("monthLabel");
    const DOW = ["ì¼","ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ","í† "];
    dowRow.innerHTML = DOW.map(d=> `<div class="dow">${d}</div>`).join("");

    let viewYear = today.getFullYear();
    let viewMonth = today.getMonth();

    document.getElementById("prevMonth").addEventListener("click", ()=>{
      viewMonth--; if(viewMonth<0){viewMonth=11; viewYear--;}
      renderCalendar();
    });
    document.getElementById("nextMonth").addEventListener("click", ()=>{
      viewMonth++; if(viewMonth>11){viewMonth=0; viewYear++;}
      renderCalendar();
    });

    let RENTS = {items:[]};

    function renderCalendar(){
      const ym = `${viewYear}.${String(viewMonth+1).padStart(2,"0")}`;
      monthLabel.textContent = ym;

      const first = new Date(viewYear, viewMonth, 1);
      const last = new Date(viewYear, viewMonth+1, 0);
      const startDow = first.getDay();
      const daysInMonth = last.getDate();

      calGrid.innerHTML = "";

      for(let i=0;i<startDow;i++){
        const c = document.createElement("div");
        c.className = "cell";
        c.innerHTML = `<div class="daynum"></div>`;
        calGrid.appendChild(c);
      }

      for(let d=1; d<=daysInMonth; d++){
        const dateStr = `${viewYear}-${String(viewMonth+1).padStart(2,"0")}-${String(d).padStart(2,"0")}`;
        const dayRents = (RENTS.items || []).filter(r=> r.date === dateStr);

        const cell = document.createElement("div");
        cell.className = "cell";
        cell.innerHTML = `
          <div class="daynum">${d}</div>
          <div class="badges">
            ${dayRents.map(r=>`
              <div class="badge" title="${escapeHtml(r.title)}">
                <span class="hall ${Number(r.hall)===1 ? "hall1":"hall2"}">${Number(r.hall)===1 ? "1":"2"}</span>
                <span class="txt">${escapeHtml(r.title)}</span>
              </div>
            `).join("")}
          </div>
        `;
        calGrid.appendChild(cell);
      }

      const totalCells = startDow + daysInMonth;
      const remain = (7 - (totalCells % 7)) % 7;
      for(let i=0;i<remain;i++){
        const c = document.createElement("div");
        c.className = "cell";
        c.innerHTML = `<div class="daynum"></div>`;
        calGrid.appendChild(c);
      }
    }

    // ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° (Netlify CMSê°€ GitHubì— ì €ì¥í•œ JSON)
    async function loadJSON(url){
      const res = await fetch(url + "?v=" + Date.now(), {cache:"no-store"});
      if(!res.ok) throw new Error("JSON ë¡œë“œ ì‹¤íŒ¨: " + url);
      return res.json();
    }

    async function init(){
      try{
        SITE = await loadJSON("/data/site.json");
        document.getElementById("headerTitle").childNodes[0].textContent = SITE.headerTitle || "ì¸ì¦ì‚¬íšŒì ê¸°ì—…(ì£¼)ë¬¸í™”ë½";
        document.getElementById("headerSubtitle").textContent = SITE.headerSubtitle || "ê³µì—° Â· êµìœ¡ Â· ë¬¸í™”ì˜ˆìˆ  í”Œë«í¼";

        const logoEl = document.getElementById("logoEl");
        if(SITE.logo){ logoEl.src = SITE.logo; }

        HERO = SITE.hero || [];
        renderSlider();
        renderTab("intro");

        const SHOWS = await loadJSON("/data/shows.json");
        renderShows(SHOWS);

        RENTS = await loadJSON("/data/rents.json");
        renderCalendar();
      }catch(e){
        console.error(e);
        // ìµœì†Œ í™”ë©´ì€ ëœ¨ê²Œ
        renderSlider();
        renderCalendar();
      }
    }

    function escapeHtml(str){
      return String(str ?? "").replace(/[&<>"']/g, (m)=>({
        "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
      }[m]));
    }

    init();
  </script>
</body>
</html>
